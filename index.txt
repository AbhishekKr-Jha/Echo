import OpenAI from "openai";
// require('dotenv').config()
// const OpenAI=require('openai')

// const openAi=process.env.SECRET_KEY
import readline from 'node:readline';
import { stdin as input, stdout as output } from 'node:process';
const openAi = "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";
// console.log("---",process.env.SECRET_KEY)

const openai = new OpenAI({
  apiKey: openAi,
});

const rl = readline.createInterface({ input, output });

const messages=[]

async function main(input) {
  const inputObj={
    role:"user",content:input
  }
  messages.push(inputObj)
  const chatCompletion = await openai.chat.completions.create({
    // messages: [
    //   { role: "user", content: "generate a js code for my project to create two arrays with example" }, 
    // ],
    messages:messages,
    model: "gpt-3.5-turbo",
  });
  console.log(chatCompletion?.choices?[0].message?.content);
  // return chatCompletion.choices[0].message.contentgf
}

// main();

// rl.question('What do you think of Node.js? ', (answer) => {
//   // TODO: Log the answer in a database
//   console.log(`Thank you for your valuable feedback: ${answer}`);})


rl.on('line', (input) => {
  if(input==='q')rl.close()
  console.log(messages)
  main(input)
  // console.log(`Received: ${d}`);
}); 



